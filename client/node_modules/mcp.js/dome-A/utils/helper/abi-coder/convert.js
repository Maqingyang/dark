var defineProperty=require("./properties.js").defineProperty;var errors=require("./errors");function addSlice(e){if(e.slice){return e}e.slice=function(){var r=Array.prototype.slice.call(arguments);return new Uint8Array(Array.prototype.slice.apply(e,r))};return e}function isArrayish(r){if(!r||parseInt(r.length)!=r.length||typeof r==="string"){return false}for(var e=0;e<r.length;e++){var t=r[e];if(t<0||t>=256||parseInt(t)!=t){return false}}return true}function arrayify(r){if(r==null){errors.throwError("cannot convert null value to array",errors.INVALID_ARGUMENT,{arg:"value",value:r})}if(r&&r.toHexString){r=r.toHexString()}if(isHexString(r)){r=r.substring(2);if(r.length%2){r="0"+r}var e=[];for(var t=0;t<r.length;t+=2){e.push(parseInt(r.substr(t,2),16))}return addSlice(new Uint8Array(e))}else if(typeof r==="string"){if(r.match(/^[0-9a-fA-F]*$/)){errors.throwError("hex string must have 0x prefix",errors.INVALID_ARGUMENT,{arg:"value",value:r})}errors.throwError("invalid hexidecimal string",errors.INVALID_ARGUMENT,{arg:"value",value:r})}if(isArrayish(r)){return addSlice(new Uint8Array(r))}errors.throwError("invalid arrayify value",{arg:"value",value:r,type:typeof r})}function concat(e){var t=[];var i=0;for(let r=0;r<e.length;r++){var n=arrayify(e[r]);t.push(n);i+=n.length}var a=new Uint8Array(i);var s=0;for(let r=0;r<t.length;r++){a.set(t[r],s);s+=t[r].length}return addSlice(a)}function stripZeros(r){r=arrayify(r);if(r.length===0){return r}var e=0;while(r[e]===0){e++}if(e){r=r.slice(e)}return r}function padZeros(r,e){r=arrayify(r);if(e<r.length){throw new Error("cannot pad")}var t=new Uint8Array(e);t.set(r,e-r.length);return addSlice(t)}function isHexString(r,e){if(typeof r!=="string"||!r.match(/^0x[0-9A-Fa-f]*$/)){return false}if(e&&r.length!==2+2*e){return false}return true}var HexCharacters="0123456789abcdef";function hexlify(r){if(r&&r.toHexString){return r.toHexString()}if(typeof r==="number"){if(r<0){errors.throwError("cannot hexlify negative value",errors.INVALID_ARG,{arg:"value",value:r})}var e="";while(r){e=HexCharacters[r&15]+e;r=parseInt(r/16)}if(e.length){if(e.length%2){e="0"+e}return"0x"+e}return"0x00"}if(isHexString(r)){if(r.length%2){r="0x0"+r.substring(2)}return r}if(isArrayish(r)){var t=[];for(var i=0;i<r.length;i++){var n=r[i];t.push(HexCharacters[(n&240)>>4]+HexCharacters[n&15])}return"0x"+t.join("")}errors.throwError("invalid hexlify value",{arg:"value",value:r})}function hexStripZeros(r){while(r.length>3&&r.substring(0,3)==="0x0"){r="0x"+r.substring(3)}return r}function hexZeroPad(r,e){while(r.length<2*e+2){r="0x0"+r.substring(2)}return r}function splitSignature(r){r=arrayify(r);if(r.length!==65){throw new Error("invalid signature")}var e=r[64];if(e!==27&&e!==28){e=27+e%2}return{r:hexlify(r.slice(0,32)),s:hexlify(r.slice(32,64)),v:e}}module.exports={arrayify:arrayify,isArrayish:isArrayish,concat:concat,padZeros:padZeros,stripZeros:stripZeros,splitSignature:splitSignature,hexlify:hexlify,isHexString:isHexString,hexStripZeros:hexStripZeros,hexZeroPad:hexZeroPad};