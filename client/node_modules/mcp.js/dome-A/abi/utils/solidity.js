"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bignumber_1=require("./bignumber");var bytes_1=require("./bytes");var utf8_1=require("./utf8");var keccak256_1=require("./keccak256");var sha2_1=require("./sha2");var regexBytes=new RegExp("^bytes([0-9]+)$");var regexNumber=new RegExp("^(u?int)([0-9]*)$");var regexArray=new RegExp("^(.*)\\[([0-9]*)\\]$");var Zeros="0000000000000000000000000000000000000000000000000000000000000000";function _pack(e,t,a){switch(e){case"address":if(a){return bytes_1.padZeros(t,32)}return bytes_1.arrayify(t);case"string":return utf8_1.toUtf8Bytes(t);case"bytes":return bytes_1.arrayify(t);case"bool":t=t?"0x01":"0x00";if(a){return bytes_1.padZeros(t,32)}return bytes_1.arrayify(t)}let n=e.match(regexNumber);if(n){let r=parseInt(n[2]||"256");if(r%8!=0||r===0||r>256){throw new Error("invalid number type - "+e)}if(a){r=256}t=bignumber_1.bigNumberify(t).toTwos(r);return bytes_1.padZeros(t,r/8)}n=e.match(regexBytes);if(n){const u=parseInt(n[1]);if(String(u)!=n[1]||u===0||u>32){throw new Error("invalid number type - "+e)}if(bytes_1.arrayify(t).byteLength!==u){throw new Error("invalid value for "+e)}if(a){return bytes_1.arrayify((t+Zeros).substring(0,66))}return t}n=e.match(regexArray);if(n&&Array.isArray(t)){var s=n[1];var r=parseInt(n[2]||String(t.length));if(r!=t.length){throw new Error("invalid value for "+e)}var i=[];t.forEach(function(r){i.push(_pack(s,r,true))});return bytes_1.concat(i)}throw new Error("unknown type - "+e)}function pack(r,t){if(r.length!=t.length){throw new Error("type/value count mismatch")}var a=[];r.forEach(function(r,e){a.push(_pack(r,t[e]))});return bytes_1.hexlify(bytes_1.concat(a))}exports.pack=pack;function keccak256(r,e){return keccak256_1.keccak256(pack(r,e))}exports.keccak256=keccak256;function sha256(r,e){return sha2_1.sha256(pack(r,e))}exports.sha256=sha256;